Lrn.controller('StudentController', ['$scope', 'DemoService','$state', 'ClassService', 'AuthService', 'BookService',
  function($scope, DemoService, $state, ClassService, AuthService, BookService) {

    if(!$scope.user) {
      $state.go('index');
    }
    var timestamp = $scope.user._id.toString().substring(0,8);
    $scope.user.createdIn = new Date( parseInt( timestamp, 16 ) * 1000 )

    $scope.user_data = DemoService.dummyUserData()[0];
    $scope.full_name = $scope.user_data.first_name + " " + $scope.user_data.last_name;

    var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
      "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"
    ];
    $scope.month_joined = monthNames[$scope.user_data.date_joined.getMonth()];
    $scope.year_joined = $scope.user_data.date_joined.getFullYear();

    $scope.upcoming_classes = DemoService.getDummyUpcomingClasses();
    $scope.past_classes = DemoService.getDummyPastClasses();

    $scope.format_date_class = function(original_date) {
      var formatted_date = original_date.split(', ');
      formatted_date = formatted_date.join(' | ');
      return formatted_date;
    }

    $scope.download = function(ticket) {
      console.log(ticket)

      // // ticket.base64 = 'data:image/png;base64,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'
      var docDefinition = ClassService.voucher(ticket)
      pdfMake.createPdf(docDefinition).download();
    }


    AuthService.updateUser($scope.user._id)
    .then(function (d) {
      console.log(d);
      $scope.classes = d;
    })

}]);
